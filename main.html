<script src="src/2.todo.js"></script>
<script type="text/javascript">
  window.onload = function(){
    // ui 
    var spans = document.querySelectorAll("span")
    var result = document.getElementById("add")
    var clear = document.getElementById("clear")
    var todo = document.getElementById("todo")
    var save = document.getElementById("save")
    // controller
    var app = new TodoApp()
    app.render(dorender)
    add.onclick = function(){
      console.log(todo.value)
      app.add(todo.value)
      dorender()
    }
    clear.onclick = function(){
      app.clear()
      dorender()
    }
    save.onclick = function(){
      app.saveAll()
    }
    function dorender(){
      items = app.items 
      var lis = document.querySelectorAll("li")
      for (var i = 0; i < lis.length; i++) {
        var li = lis[i]
        li.remove()
      }
      for (var i = 0; i < items.length; i++) {
        var item = items[i].subject
        addLiOne(item)
      }
    }
    function addLiOne(str){
      var ul = document.getElementById("ul")
      var li = document.createElement("li");
      li.appendChild(document.createTextNode(str));
      ul.appendChild(li);
    }
  }
</script>
<div>
  <div>
    <input value="test" id="todo"/>
    <button id="add">add</button>
    <button id="clear">clear done todo</button>
    <button id="save">save</button>
    <button id="remotesync">remote dorender</button>
  </div>  
  <div>
    <ul id="ul">
      <li>1</li>
      <li>2</li>
      <li>3</li>
    </ul>
  </div>
</div>

<style>

</style>